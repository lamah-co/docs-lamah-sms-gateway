---
title: 'List Messages'
description: 'Retrieve a paginated list of SMS messages with filtering options'
---

## Overview

Retrieve a paginated list of SMS messages sent from your project. This endpoint supports filtering by date range and pagination to help you manage and analyze your message history.

## Endpoint

<CodeGroup>

```bash cURL
curl --request GET \
  "https://sms.lamah.com/api/sms/messages?page=1&per_page=20&from=2024-01-01&to=2024-01-31" \
  --header "Authorization: Bearer YOUR_API_TOKEN" \
  --header "Accept: application/json"
```

```javascript JavaScript
const url = new URL('https://sms.lamah.com/api/sms/messages');
url.searchParams.set('page', '1');
url.searchParams.set('per_page', '20');
url.searchParams.set('from', '2024-01-01');
url.searchParams.set('to', '2024-01-31');

const response = await fetch(url, {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer YOUR_API_TOKEN',
    'Accept': 'application/json'
  }
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

url = "https://sms.lamah.com/api/sms/messages"
headers = {
    "Authorization": "Bearer YOUR_API_TOKEN",
    "Accept": "application/json"
}
params = {
    "page": 1,
    "per_page": 20,
    "from": "2024-01-01",
    "to": "2024-01-31"
}

response = requests.get(url, headers=headers, params=params)
print(response.json())
```

```php PHP
<?php
$curl = curl_init();

curl_setopt_array($curl, array(
CURLOPT_URL => 'https://sms.lamah.com/api/sms/messages?page=1&per_page=20&from=2024-01-01&to=2024-01-31',
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_CUSTOMREQUEST => 'GET',
  CURLOPT_HTTPHEADER => array(
    'Authorization: Bearer YOUR_API_TOKEN',
    'Content-Type: application/json',
    'Accept: application/json'
  ),
));

$response = curl_exec($curl);
curl_close($curl);
echo $response;
?>
```

</CodeGroup>

## Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `page` | integer | ❌ | Page number for pagination (default: 1) |
| `per_page` | integer | ❌ | Number of messages per page (default: 20, max: 100) |
| `from` | string | ❌ | Start date for filtering (YYYY-MM-DD format) |
| `to` | string | ❌ | End date for filtering (YYYY-MM-DD format) |

### Parameter Details

<AccordionGroup>
  <Accordion title="page">
    The page number for pagination.
    
    - **Default**: 1
    - **Minimum**: 1
    - **Type**: Positive integer
  </Accordion>
  
  <Accordion title="per_page">
    Number of messages to return per page.
    
    - **Default**: 20
    - **Minimum**: 1
    - **Maximum**: 100
    - **Recommended**: 20-50 for optimal performance
  </Accordion>
  
  <Accordion title="from">
    Start date for filtering messages.
    
    - **Format**: YYYY-MM-DD (e.g., "2024-01-01")
    - **Timezone**: UTC
    - **Inclusive**: Messages from this date are included
  </Accordion>
  
  <Accordion title="to">
    End date for filtering messages.
    
    - **Format**: YYYY-MM-DD (e.g., "2024-01-31")
    - **Timezone**: UTC
    - **Inclusive**: Messages up to this date are included
  </Accordion>
</AccordionGroup>

## Response

### Success Response (200 OK)

```json
{
  "data": {
    "current_page": 1,
    "data": [
      {
        "short_message": "تم تأكيد موعد معاينة العقار غدًا الساعة 5 مساءً في قرقارش، طرابلس.",
        "message_type": "sms",
        "send_type": "single",
        "contact_group_id": null,
        "message_consumption": 1,
        "created_at": "2024-01-15T10:30:00Z",
        "updated_at": "2024-01-15T10:30:00Z",
        "receiver": [
          {
            "number": "00218912345678",
            "sent_at": "2024-01-15T10:30:02Z",
            "delivered_at": "2024-01-15T10:30:15Z",
            "status": "delivered",
            "delivery_report": null,
            "created_at": "2024-01-15T10:30:00Z",
            "updated_at": "2024-01-15T10:30:15Z"
          }
        ]
      }
    ],
    "per_page": 20,
    "last_page": 5,
    "total": 95
  }
}
```

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `data` | object | Laravel paginator with message records |

### Message Object Fields

| Field | Type | Description |
|-------|------|-------------|
| `short_message` | string | Message content |
| `message_type` | string | Always `sms` for SMS messages |
| `send_type` | string | `single` or `multiple` |
| `contact_group_id` | string | Contact group UUID if applicable |
| `message_consumption` | integer | SMS parts consumed for this message |
| `created_at` | string | ISO 8601 timestamp |
| `updated_at` | string | ISO 8601 timestamp |
| `receiver` | array | List of receipt objects for each recipient |

### Pagination Object Fields

| Field | Type | Description |
|-------|------|-------------|
| `current_page` | integer | Current page number |
| `per_page` | integer | Messages per page |
| `last_page` | integer | Total number of pages |
| `total` | integer | Total number of messages matching filters |

### Summary Object Fields

| Field | Type | Description |
|-------|------|-------------|
| `total_cost` | number | Total cost of all messages in the filtered results |
| `total_messages` | integer | Total number of messages |
| `delivered` | integer | Number of delivered messages |
| `failed` | integer | Number of failed messages |
| `pending` | integer | Number of pending messages |

## Error Responses

### 400 Bad Request

```json
{
  "error": "Invalid date format",
  "code": "INVALID_DATE_FORMAT",
  "details": {
    "field": "from",
    "value": "2024/01/01",
    "expected_format": "YYYY-MM-DD"
  }
}
```

### 401 Unauthorized

```json
{
  "error": "Invalid API token",
  "code": "UNAUTHORIZED"
}
```

## Pagination Examples

### Basic Pagination

<CodeGroup>

```javascript Basic Pagination
const getAllMessages = async () => {
  let allMessages = [];
  let currentPage = 1;
  let hasNextPage = true;
  
  while (hasNextPage) {
    const url = new URL('https://sms.lamah.com/api/sms/messages');
    url.searchParams.set('page', String(currentPage));
    url.searchParams.set('per_page', '50');
    const response = await fetch(url, {
      headers: { 'Authorization': 'Bearer YOUR_API_TOKEN' }
    });
    
    const data = await response.json();
    allMessages = allMessages.concat(data.data.data);
    
    hasNextPage = data.data.current_page < data.data.last_page;
    currentPage++;
    
    console.log(`Fetched page ${currentPage - 1}, total messages: ${allMessages.length}`);
  }
  
  return allMessages;
};
```

```python Basic Pagination
def get_all_messages():
    all_messages = []
    current_page = 1
    has_next_page = True
    
    while has_next_page:
        response = requests.get(
            'https://sms.lamah.com/api/sms/messages',
            headers={ 'Authorization': 'Bearer YOUR_API_TOKEN' },
            params={ 'page': current_page, 'per_page': 50 }
        )
        
        data = response.json()
        all_messages.extend(data['data']['data'])
        
        has_next_page = data['data']['current_page'] < data['data']['last_page']
        current_page += 1
        
        print(f"Fetched page {current_page - 1}, total messages: {len(all_messages)}")
    
    return all_messages
```

</CodeGroup>

### Date Range Filtering

<CodeGroup>

```javascript Date Filtering
const getMessagesForMonth = async (year, month) => {
  const from = `${year}-${month.toString().padStart(2, '0')}-01`;
  const to = `${year}-${month.toString().padStart(2, '0')}-31`;
  
  const response = await fetch('https://sms.lamah.com/api/sms/messages', {
    method: 'GET',
    headers: {
      'Authorization': 'Bearer YOUR_API_TOKEN',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      page: 1,
      per_page: 100,
      from: from,
      to: to
    })
  });
  
  const data = await response.json();
  console.log(`Found ${data.summary.total_messages} messages for ${year}-${month}`);
  console.log(`Total cost: $${data.summary.total_cost}`);
  
  return data;
};

// Get messages for January 2024
const januaryMessages = await getMessagesForMonth(2024, 1);
```

```python Date Filtering
def get_messages_for_month(year, month):
    from_date = f"{year}-{month:02d}-01"
    to_date = f"{year}-{month:02d}-31"
    
    response = requests.get(
        'https://sms.lamah.com/api/sms/messages',
        headers={ 'Authorization': 'Bearer YOUR_API_TOKEN' },
        params={ 'page': 1, 'per_page': 100, 'from': from_date, 'to': to_date }
    )
    data = response.json()
    print(f"Found {data['data']['total']} messages for {year}-{month}")
    
    return data

# Get messages for January 2024
january_messages = get_messages_for_month(2024, 1)
```

</CodeGroup>

## Use Cases

<CardGroup cols={2}>
  <Card title="Message History" icon="history">
    Review all messages sent from your project
  </Card>
  <Card title="Cost Analysis" icon="chart-bar">
    Analyze messaging costs over time periods
  </Card>
  <Card title="Delivery Reports" icon="clipboard-check">
    Generate delivery reports for specific date ranges
  </Card>
  <Card title="Audit Trail" icon="file-text">
    Maintain compliance records of all communications
  </Card>
</CardGroup>

## Best Practices

<Tip>
  **Pagination**: Use reasonable page sizes (20-50) to balance performance and data transfer.
</Tip>

<Warning>
  **Date Ranges**: Avoid very large date ranges without pagination to prevent timeouts.
</Warning>

### Performance Tips

1. **Use date filters** to limit the result set
2. **Implement pagination** for large datasets
3. **Cache results** when appropriate
4. **Use appropriate page sizes** based on your use case

### Error Handling

<CodeGroup>

```javascript Error Handling
const getMessages = async (filters = {}) => {
  try {
    const url = new URL('https://sms.lamah.com/api/sms/messages');
    Object.entries(filters).forEach(([k, v]) => url.searchParams.set(k, String(v)));
    const response = await fetch(url, { headers: { 'Authorization': 'Bearer YOUR_API_TOKEN' } });

    if (!response.ok) {
      const error = await response.json();
      console.error('Failed to get messages:', error.error);
      return null;
    }

    const data = await response.json();
    return data;
    
  } catch (error) {
    console.error('Network error:', error);
    return null;
  }
};
```

```python Error Handling
def get_messages(filters=None):
    if filters is None:
        filters = {}
    
    try:
        response = requests.get('https://sms.lamah.com/api/sms/messages', headers={ 'Authorization': 'Bearer YOUR_API_TOKEN' }, params=filters)
        
        if not response.ok:
            error = response.json()
            print(f"Failed to get messages: {error.get('message', 'Unknown error')}")
            return None
        
        data = response.json()
        return data
        
    except Exception as error:
        print(f"Network error: {error}")
        return None
```

</CodeGroup>
