---
title: 'Send Template SMS'
description: 'Send SMS messages using pre-defined templates with dynamic parameters'
---

## Overview

Send SMS messages using pre-defined templates with dynamic parameters. Templates allow you to create reusable message formats with placeholders that can be filled with specific values for each recipient.

## Endpoint

<CodeGroup>

```bash cURL
curl --request POST \
  "https://sms.lamah.com/api/sms/messages/template" \
  --header "Authorization: Bearer YOUR_API_TOKEN" \
  --header "Content-Type: application/json" \
  --data '{
    "template_id": "welcome_template_123",
    "sender": "YourApp",
    "payment_type": "wallet",
    "receiver": "+1234567890",
    "params": [
      "John Doe",
      "Premium",
      "2024-01-15"
    ]
  }'
```

```javascript JavaScript
const response = await fetch('https://sms.lamah.com/api/sms/messages/template', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_TOKEN',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    template_id: 'welcome_template_123',
    sender: 'YourApp',
    payment_type: 'wallet',
    receiver: '+1234567890',
    params: [
      'John Doe',
      'Premium',
      '2024-01-15'
    ]
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

url = "https://sms.lamah.com/api/sms/messages/template"
headers = {
    "Authorization": "Bearer YOUR_API_TOKEN",
    "Content-Type": "application/json"
}
payload = {
    "template_id": "welcome_template_123",
    "sender": "YourApp",
    "payment_type": "wallet",
    "receiver": "+1234567890",
    "params": [
        "John Doe",
        "Premium",
        "2024-01-15"
    ]
}

response = requests.post(url, headers=headers, json=payload)
print(response.json())
```

```php PHP
<?php
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => 'https://sms.lamah.com/api/sms/messages/template',
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_CUSTOMREQUEST => 'POST',
  CURLOPT_POSTFIELDS => json_encode([
    'template_id' => 'welcome_template_123',
    'sender' => 'YourApp',
    'payment_type' => 'wallet',
    'receiver' => '+1234567890',
    'params' => [
      'John Doe',
      'Premium',
      '2024-01-15'
    ]
  ]),
  CURLOPT_HTTPHEADER => array(
    'Authorization: Bearer YOUR_API_TOKEN',
    'Content-Type: application/json'
  ),
));

$response = curl_exec($curl);
curl_close($curl);
echo $response;
?>
```

</CodeGroup>

## Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `template_id` | string | ✅ | The ID of the template to use |
| `sender` | string | ✅ | The sender ID (up to 11 characters) |
| `payment_type` | string | ✅ | Payment method: `wallet` or `subscription` |
| `receiver` | string | ✅ | The recipient's phone number in international format |
| `params` | array | ❌ | Array of parameters to fill template placeholders |

### Parameter Details

<AccordionGroup>
  <Accordion title="template_id">
    The unique identifier of the template you want to use.
    
    - **Format**: String identifier created when template was defined
    - **Examples**: `welcome_template_123`, `otp_verification`, `order_confirmation`
    - **Management**: Templates are managed through your dashboard
  </Accordion>
  
  <Accordion title="sender">
    The sender ID that will appear on the recipient's device.
    
    - **Length**: Maximum 11 characters
    - **Format**: Alphanumeric characters only
    - **Examples**: `YourApp`, `MyCompany`, `Alert123`
  </Accordion>
  
  <Accordion title="payment_type">
    Specifies how the SMS cost will be charged.
    
    - **`wallet`**: Deduct from your account balance
    - **`subscription`**: Use your subscription plan credits
  </Accordion>
  
  <Accordion title="receiver">
    The recipient's phone number in international format.
    
    - **Format**: Must include country code (e.g., `+1234567890`)
    - **Validation**: Number will be validated before sending
  </Accordion>
  
  <Accordion title="params">
    Array of values to replace placeholders in the template.
    
    - **Order**: Parameters are replaced in the order they appear in the template
    - **Type**: All parameters are treated as strings
    - **Optional**: Only required if template contains placeholders
    - **Count**: Must match the number of placeholders in the template
  </Accordion>
</AccordionGroup>

## Template Format

Templates use placeholder syntax with numbered parameters:

### Example Template
```
Hello {1}, welcome to {2}! Your account expires on {3}. 
Visit our website for more information.
```

### With Parameters
```json
{
  "params": ["John Doe", "Premium Plan", "2024-01-15"]
}
```

### Resulting Message
```
Hello John Doe, welcome to Premium Plan! Your account expires on 2024-01-15. 
Visit our website for more information.
```

## Response

### Success Response (200 OK)

```json
{
  "message_id": "msg_123456789",
  "template_id": "welcome_template_123",
  "status": "sent",
  "cost": 0.05,
  "balance_remaining": 99.95,
  "final_message": "Hello John Doe, welcome to Premium Plan! Your account expires on 2024-01-15. Visit our website for more information.",
  "parts": 1,
  "encoding": "GSM7"
}
```

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `message_id` | string | Unique identifier for the sent message |
| `template_id` | string | ID of the template that was used |
| `status` | string | Message status: `sent`, `pending`, `failed` |
| `cost` | number | Cost of sending the message |
| `balance_remaining` | number | Remaining account balance |
| `final_message` | string | The complete message after parameter substitution |
| `parts` | integer | Number of SMS parts |
| `encoding` | string | Message encoding used |

## Error Responses

### 400 Bad Request - Invalid Template

```json
{
  "error": "Template not found",
  "code": "TEMPLATE_NOT_FOUND",
  "details": {
    "template_id": "invalid_template_123"
  }
}
```

### 400 Bad Request - Parameter Mismatch

```json
{
  "error": "Parameter count mismatch",
  "code": "PARAMETER_MISMATCH",
  "details": {
    "expected": 3,
    "provided": 2,
    "template_id": "welcome_template_123"
  }
}
```

### 401 Unauthorized

```json
{
  "error": "Invalid API token",
  "code": "UNAUTHORIZED"
}
```

### 402 Payment Required

```json
{
  "error": "Insufficient balance",
  "code": "INSUFFICIENT_BALANCE",
  "details": {
    "required": 0.05,
    "available": 0.02
  }
}
```

## Template Management

<Note>
  Templates are created and managed through your Lamah dashboard. You cannot create templates via the API.
</Note>

### Creating Templates

1. **Log into Dashboard**: Visit [https://sms.lamah.com](https://sms.lamah.com)
2. **Navigate to Templates**: Go to the Templates section
3. **Create New Template**: Click "Create Template"
4. **Define Content**: Write your message with placeholders like `{1}`, `{2}`, etc.
5. **Save Template**: Give it a unique ID and save

### Template Best Practices

<CardGroup cols={2}>
  <Card title="Use Clear Placeholders" icon="tag">
    Use numbered placeholders `{1}`, `{2}` in logical order
  </Card>
  <Card title="Keep It Concise" icon="compress">
    Templates should be concise to minimize SMS costs
  </Card>
  <Card title="Test Thoroughly" icon="flask">
    Test templates with various parameter combinations
  </Card>
  <Card title="Document Parameters" icon="file-text">
    Document what each parameter represents for your team
  </Card>
</CardGroup>

## Common Use Cases

### Welcome Messages
```
Welcome {1}! Your {2} account is now active. 
Login at: {3}
```

### OTP Verification
```
Your verification code is: {1}
This code expires in {2} minutes.
```

### Order Confirmations
```
Order #{1} confirmed! 
Total: ${2}
Delivery: {3}
Track: {4}
```

### Appointment Reminders
```
Hi {1}, reminder: {2} appointment on {3} at {4}.
Location: {5}
```

## Error Handling Example

<CodeGroup>

```javascript Error Handling
const sendTemplateMessage = async (templateData) => {
  try {
    const response = await fetch('https://sms.lamah.com/api/sms/messages/template', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_TOKEN',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(templateData)
    });

    if (!response.ok) {
      const error = await response.json();
      
      if (error.code === 'TEMPLATE_NOT_FOUND') {
        console.error('Template does not exist:', error.details.template_id);
      } else if (error.code === 'PARAMETER_MISMATCH') {
        console.error(`Expected ${error.details.expected} parameters, got ${error.details.provided}`);
      } else {
        console.error('Template SMS failed:', error.error);
      }
      return null;
    }

    const result = await response.json();
    console.log('Template SMS sent:', result.message_id);
    return result;
    
  } catch (error) {
    console.error('Network error:', error);
    return null;
  }
};
```

```python Error Handling
def send_template_message(template_data):
    try:
        response = requests.post(
            'https://sms.lamah.com/api/sms/messages/template',
            headers={
                'Authorization': 'Bearer YOUR_API_TOKEN',
                'Content-Type': 'application/json'
            },
            json=template_data
        )
        
        if not response.ok:
            error = response.json()
            
            if error['code'] == 'TEMPLATE_NOT_FOUND':
                print(f"Template does not exist: {error['details']['template_id']}")
            elif error['code'] == 'PARAMETER_MISMATCH':
                print(f"Expected {error['details']['expected']} parameters, got {error['details']['provided']}")
            else:
                print(f"Template SMS failed: {error['error']}")
            return None
        
        result = response.json()
        print(f"Template SMS sent: {result['message_id']}")
        return result
        
    except Exception as error:
        print(f"Network error: {error}")
        return None
```

</CodeGroup>
